#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/rgb.h>
#include <dt-bindings/zmk/backlight.h>


// Custom layers
#define QWERTY 0
#define APTV3 1
#define RKP 2
#define RNAV 3
#define KP 4
#define NAV 5
#define SYM 6
#define SYM_APTV3 7

// Default Kinesis Advantage 360 Pro layers.
#define KIN_DEF 8
#define KIN_KP 9
#define KIN_FN 10
#define MOD 11

#define ___ &trans
#define _x_ &none

#define LEFT_KEYS 1 2 3 4 5 6 14 15 16 17 18 19 20 28 29 30 31 32 33 34 46 47 48 49 50 51 60 61 62 63 64
#define RIGHT_KEYS 7 8 9 10 11 12 13 21 22 23 24 25 26 27 39 40 41 42 43 44 45 54 55 56 57 58 59 71 72 73 74 75
#define LEFT_THUMB_KEYS 35 36 52 65 66 67
#define RIGHT_THUMB_KEYS 37 38 53 68 69 70
#define THUMB_KEYS LEFT_THUMB_KEYS RIGHT_THUMB_KEYS 

// ╭────┬────┬────┬────┬────┬────┬────╮                                       ╭────┬────┬────┬────┬────┬────┬────╮
// │  0 │  1 │  2 │  3 │  4 │  5 │  6 │                                       │  7 │  8 │  9 │ 10 │ 11 │ 12 │ 13 │
// ├────┼────┼────┼────┼────┼────┼────┤                                       ├────┼────┼────┼────┼────┼────┼────┤
// │ 14 │ 15 │ 16 │ 17 │ 18 │ 19 │ 20 │                                       │ 21 │ 22 │ 23 │ 24 │ 25 │ 26 │ 27 │
// ├────┼────┼────┼────┼────┼────┼────┤       ╭────┬────╮   ╭────┬────╮       ├────┼────┼────┼────┼────┼────┼────┤
// │ 28 │ 29 │ 30 │ 31 │ 32 │ 33 │ 34 │       │ 35 │ 36 │   │ 37 │ 38 │       │ 39 │ 40 │ 41 │ 42 │ 43 │ 44 │ 45 │
// ├────┼────┼────┼────┼────┼────┼────╯  ╭────┼────┼────┤   ├────┼────┼────╮  ╰────┼────┼────┼────┼────┼────┼────┤
// │ 46 │ 47 │ 48 │ 49 │ 50 │ 51 │       │    │    │ 52 │   │ 53 │    │    │       │ 54 │ 55 │ 56 │ 57 │ 58 │ 59 │
// ├────┼────┼────┼────┼────┼────╯       │    │    ├────┤   ├────┤    │    │       ╰────┼────┼────┼────┼────┼────┤
// │ 60 │ 61 │ 62 │ 63 │ 64 │            │ 65 │ 66 │ 67 │   │ 68 │ 69 │ 70 │            │ 71 │ 72 │ 73 │ 74 │ 75 │
// ╰────┴────┴────┴────┴────╯            ╰────┴────┴────╯   ╰────┴────┴────╯            ╰────┴────┴────┴────┴────╯

#define POS_Q 15
#define POS_W 16
#define POS_E 17
#define POS_R 18

#define POS_U 23
#define POS_I 24
#define POS_O 25
#define POS_P 26

#define POS_A 29
#define POS_S 30
#define POS_D 31
#define POS_F 32
#define POS_G 33

#define POS_H 40
#define POS_J 41
#define POS_K 42
#define POS_L 43
#define POS_SEMI 44

#define POS_ENTER 66
#define POS_BKSP 69
#define POS_DEL 70

#define DEFINE_COMBO(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    timeout-ms = <50>; \
    bindings = BINDINGS; \
    key-positions = KEYPOS; \
  };

#define DEFINE_SLOW_COMBO(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    timeout-ms = <50>; \
    bindings = BINDINGS; \
    key-positions = KEYPOS; \
    slow-release; \
  };

/ {
    combos {
        compatible = "zmk,combos";

     //   DEFINE_COMBO(altgr, <&kp RALT>, <POS_BKSP POS_DEL>)

     //   DEFINE_COMBO(lshft, <&kp LSHFT>, <POS_K POS_A>)
     //   DEFINE_COMBO(lgui, <&kp LGUI>, <POS_W POS_S>)
     //   DEFINE_COMBO(lalt, <&kp LALT>, <POS_E POS_D>)
     //   DEFINE_COMBO(lctrl, <&kp LCTRL>, <POS_R POS_F>)

     //   DEFINE_COMBO(rctrl, <&kp RCTRL>, <POS_U POS_J>)
     //   DEFINE_COMBO(ralt, <&kp LALT>, <POS_I POS_K>) // LALT for Windows compatibility
     //   DEFINE_COMBO(rgui, <&kp RGUI>, <POS_O POS_L>)
     //   DEFINE_COMBO(rshft, <&kp RSHFT>, <POS_P POS_SEMI>)
   };
};

/ {
    behaviors {
      #include "macros.dtsi"
      #include "version.dtsi"
      #ifndef VERSION_MACRO
      macro_ver: macro_ver {
        compatible = "zmk,behavior-macro";
        label = "macro_version";
        #binding-cells = <0>;
        bindings = <&kp RET>;
      };
      #endif

      hml: homerow_mods_left {
          compatible = "zmk,behavior-hold-tap";
          flavor = "balanced";
          label = "HOME_ROW_LEFT";
          #binding-cells = <2>;
          tapping-term-ms = <300>;
          quick-tap-ms = <170>;
          require-prior-idle-ms = <100>;
          bindings = <&kp>, <&kp>;
          hold-trigger-key-positions = <RIGHT_KEYS THUMB_KEYS>;
          hold-trigger-on-release;
      };
      
      hmr: homerow_mods_right {
          compatible = "zmk,behavior-hold-tap";
          flavor = "balanced";
          label = "HOME_ROW_RIGHT";
          #binding-cells = <2>;
          tapping-term-ms = <300>;
          quick-tap-ms = <170>;
          require-prior-idle-ms = <100>;
          bindings = <&kp>, <&kp>;
          hold-trigger-key-positions = <LEFT_KEYS THUMB_KEYS>;
          hold-trigger-on-release;
      };

      mtt: mod_tap {
          compatible = "zmk,behavior-hold-tap";
          flavor = "tap-preferred";
          label = "MOD_TAP";
          #binding-cells = <2>;
          tapping-term-ms = <220>;
          quick-tap-ms = <200>;
          bindings = <&kp>, <&kp>;
      };

      mth: mod_hold {
          compatible = "zmk,behavior-hold-tap";
          flavor = "hold-preferred";
          label = "MOD_HOLD";
          #binding-cells = <2>;
          tapping-term-ms = <220>;
          bindings = <&kp>, <&kp>;
      };

      ltt: layer_tap {
          compatible = "zmk,behavior-hold-tap";
          flavor = "tap-preferred";
          label = "LAYER_TAP";
          #binding-cells = <2>;
          tapping-term-ms = <220>;
          quick-tap-ms = <200>;
          bindings = <&mo>, <&kp>;
      };

      lth: layer_hold {
          compatible = "zmk,behavior-hold-tap";
          flavor = "hold-preferred";
          label = "LAYER_HOLD";
          #binding-cells = <2>;
          tapping-term-ms = <220>;
          bindings = <&mo>, <&kp>;
      };
    };

  keymap {
    compatible = "zmk,keymap";

    qwerty_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp GRAVE     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        &to RKP                                                                                                     &mo MOD       &kp N6        &kp N7        &kp N8        &kp N9        &kp N0        &kp EQUAL
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TAB       &kp Q         &kp W         &kp E         &kp R         &kp T         &to QWERTY                                                                                                  &to QWERTY    &kp Y         &kp U         &kp I         &kp O         &kp P         &kp MINUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &lth KP ESC   &hml LSHFT A  &hml LGUI S   &hml LALT D   &hml LCTRL F  &kp G         &to APTV3                      &kp LCTRL     &kp LALT          &kp RGUI      &kp RCTRL                      &to RNAV      &kp H         &hmr RCTRL J  &hmr LALT K   &hmr RGUI L &hmr RSHFT SEMI &kp SQT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp LSHFT     &kp Z         &kp X         &kp C         &kp V         &kp B                                                      &kp HOME          &kp LALT                                                   &kp N         &kp M         &kp COMMA     &kp DOT       &kp FSLH      &kp RSHFT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp GLOBE     &kp LSHFT     &kp LGUI      &kp LALT      &kp LCTRL                                    &kp SPACE    &lth NAV ENTER &kp LCTRL         &kp RALT    &mtt LSHFT BSPC &lth SYM DEL                                 &kp RCTRL     &kp LALT      &kp RGUI      &kp RSHFT     &kp GLOBE
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    aptv3_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp GRAVE     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        &to RKP                                                                                                     &mo MOD       &kp N6        &kp N7        &kp N8        &kp N9        &kp N0        &kp EQUAL
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TAB       &kp W         &kp G         &kp D         &kp F         &kp B         &to QWERTY                                                                                                  &to QWERTY    &kp Q         &kp L         &kp U         &kp O         &kp Y         &kp MINUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp ESC       &kp R         &kp S         &kp T         &kp H         &kp K         &to APTV3                      &kp LCTRL     &kp LALT          &kp RGUI      &kp RCTRL                      &to RNAV      &kp J         &kp N         &kp E         &kp A         &kp I         &kp SEMI
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp LSHFT     &kp X         &kp C         &kp M         &kp P         &kp V                                                      &kp HOME          &kp LALT                                                   &kp Z         &kp COMMA     &kp DOT       &kp SQT       &kp FSLH      &kp RSHFT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp GLOBE     &kp LSHFT     &kp LGUI      &kp LALT      &kp LCTRL                                    &kp SPACE    &lth NAV ENTER &kp LCTRL         &kp RALT    &mtt LSHFT BSPC &lth SYM_APTV3 DEL                           &kp RCTRL     &kp LALT      &kp RGUI      &kp RSHFT     &kp GLOBE
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    rkp_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             ___           ___           ___           ___           ___           ___           ___                                                                                                         ___           &kp KP_NUM    &kp LPAR    &kp KP_DIVIDE &kp KP_MULTIPLY &kp RPAR      ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           ___                                                                                                         ___           &kp CARET     &kp KP_N7     &kp KP_N8     &kp KP_N9     &kp KP_MINUS  ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           ___                            ___           ___               ___           ___                            ___           &kp PERCENT   &kp KP_N4     &kp KP_N5     &kp KP_N6     &kp KP_PLUS   &kp KP_ENTER
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___                                                        ___               ___                                                        &kp EQUAL     &kp KP_N1     &kp KP_N2     &kp KP_N3     &kp KP_DOT    ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           &kp KP_N0                                    ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    rnav_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             ___           ___           ___           ___           ___           ___           ___                                                                                                         ___           ___           ___           ___           ___           ___           ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           ___                                                                                                         ___           &kp F6        &kp F7        &kp F8        &kp F9        &kp F10       &kp F11
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           ___                            ___           ___               ___           ___                            ___           &kp INS       &kp HOME      &kp UP        &kp END       &kp PG_UP     &kp F12
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___                                                        ___               ___                                                        &kp K_APP     &kp LEFT      &kp DOWN      &kp RIGHT     &kp PG_DN     ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           ___                                          ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    kp_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             ___           &kp N0        &kp N9        &kp N8        &kp N7        &kp N6        ___                                                                                                         ___           &kp KP_NUM    &kp LPAR    &kp KP_DIVIDE &kp KP_MULTIPLY &kp RPAR      ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp P         &kp O         &kp I         &kp U         &kp Y         ___                                                                                                         ___           &kp CARET     &kp KP_N7     &kp KP_N8     &kp KP_N9     &kp KP_MINUS  ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp SEMI      &kp L         &kp K         &kp J         &kp H         ___                            ___           ___               ___           ___                            ___           &kp PERCENT   &kp KP_N4     &kp KP_N5     &kp KP_N6     &kp KP_PLUS   &kp KP_ENTER
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp FSLH      &kp DOT       &kp COMMA     &kp M         &kp N                                                      ___               ___                                                        &kp EQUAL     &kp KP_N1     &kp KP_N2     &kp KP_N3     &kp KP_DOT    ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           &kp KP_N0                                    ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    nav_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp C_VOL_UP  &kp C_BRI_DN  &kp C_BRI_UP  _x_           _x_           _x_           ___                                                                                                         ___           _x_           &kp C_PREV    &kp C_PP      &kp C_NEXT    &kp C_MUTE    &kp C_VOL_DN
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp F1        &kp F2        &kp F3        &kp F4        &kp F5        ___                                                                                                         ___           &kp F6        &kp F7        &kp F8        &kp F9        &kp F10       &kp F11
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp LSHFT     &kp LGUI      &kp LALT      &kp LCTRL     ___           ___                            ___           ___               ___           ___                            ___           &kp INS       &kp HOME      &kp UP        &kp END       &kp PG_UP     &kp F12
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           &kp CAPS      &kp PSCRN     &kp SCLK    &kp PAUSE_BREAK &kp DEL                                                    ___               ___                                                        &kp K_APP     &kp LEFT      &kp DOWN      &kp RIGHT     &kp PG_DN     ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           ___                                          ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    sym_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp TILDE     &kp EXCL      &kp AT        &kp HASH      &kp DOLLAR    &kp PERCENT   ___                                                                                                         ___           &kp CARET     &kp AMPERSAND &kp ASTERISK  &kp LPAR      &kp RPAR      &kp PLUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TILDE     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        ___                                                                                                         ___           &kp N6        &kp N7        &kp N8        &kp N9        &kp N0        &kp UNDERSCORE
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp GRAVE     &kp EXCL      &kp AT        &kp HASH      &kp DOLLAR    &kp PERCENT   ___                            ___           ___               ___           ___                            ___           &kp CARET     &kp AMPERSAND &kp ASTERISK  &kp EQUAL     &kp COLON     &kp DQT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp PIPE      &kp LBRC      &kp LPAR      &kp RPAR      &kp RBRC      &kp LBKT                                                   ___               ___                                                        &kp RBKT      &kp PLUS      &kp LT        &kp GT        &kp QUESTION  &kp BSLH
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           ___                                          ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };

    sym_aptv3_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp TILDE     &kp EXCL      &kp AT        &kp HASH      &kp DOLLAR    &kp PERCENT   ___                                                                                                         ___           &kp CARET     &kp AMPERSAND &kp ASTERISK  &kp LPAR      &kp RPAR      &kp PLUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TILDE     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        ___                                                                                                         ___           &kp N6        &kp N7        &kp N8        &kp N9        &kp N0        &kp UNDERSCORE
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp GRAVE     &kp EXCL      &kp AT        &kp HASH      &kp DOLLAR    &kp PERCENT   ___                            ___           ___               ___           ___                            ___           &kp CARET     &kp AMPERSAND &kp ASTERISK  &kp EQUAL     &kp PLUS      &kp COLON
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp PIPE      &kp LBRC      &kp LPAR      &kp RPAR      &kp RBRC      &kp LBKT                                                   ___               ___                                                        &kp RBKT      &kp LT        &kp GT        &kp DQT       &kp QUESTION  &kp BSLH
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           ___                                          ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };


    // Default Kinesis Advantage 360 Pro layers.
    kinesis_default_layer {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp EQUAL     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        &tog KIN_KP                                                                                                 &mo MOD       &kp N6        &kp N7        &kp N8        &kp N9        &kp N0        &kp MINUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TAB       &kp Q         &kp W         &kp E         &kp R         &kp T         _x_                                                                                                         _x_           &kp Y         &kp U         &kp I         &kp O         &kp P         &kp BSLH
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp ESC       &kp A         &kp S         &kp D         &kp F         &kp G         _x_                            &kp LCTRL     &kp LALT          &kp LGUI      &kp RCTRL                      _x_           &kp H         &kp J         &kp K         &kp L         &kp SEMI      &kp SQT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp LSHFT     &kp Z         &kp X         &kp C         &kp V         &kp B                                                      &kp HOME          &kp PG_UP                                                  &kp N         &kp M         &kp COMMA     &kp DOT       &kp FSLH      &kp RSHFT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &mo KIN_FN    &kp GRAVE     &kp CAPS      &kp LEFT      &kp RIGHT                                    &kp BSPC      &kp DEL       &kp END           &kp PG_DN     &kp ENTER     &kp SPACE                                    &kp UP        &kp DOWN      &kp LBKT      &kp RBKT      &mo KIN_FN
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };
    kinesis_keypad {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp EQUAL     &kp N1        &kp N2        &kp N3        &kp N4        &kp N5        ___                                                                                                         &mo MOD       &kp N6        &kp KP_NUM    &kp KP_EQUAL  &kp KP_DIVIDE &kp KP_MULTIPLY &kp MINUS
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp TAB       &kp Q         &kp W         &kp E         &kp R         &kp T         _x_                                                                                                         _x_           &kp Y         &kp KP_N7     &kp KP_N8     &kp KP_N9     &kp KP_MINUS  &kp BSLH
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp ESC       &kp A         &kp S         &kp D         &kp F         &kp G         _x_                            &kp LCTRL     &kp LALT          &kp LGUI      &kp RCTRL                      _x_           &kp H         &kp KP_N4     &kp KP_N5     &kp KP_N6     &kp KP_PLUS   &kp SQT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &kp LSHFT     &kp Z         &kp X         &kp C         &kp V         &kp B                                                      &kp HOME          &kp PG_UP                                                  &kp N         &kp KP_N1     &kp KP_N2     &kp KP_N3     &kp KP_ENTER  &kp RSHFT
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             &mo KIN_FN    &kp GRAVE     &kp CAPS      &kp LEFT      &kp RIGHT                                    &kp BSPC      &kp DEL       &kp END           &kp PG_DN     &kp ENTER     &kp KP_N0                                    &kp UP        &kp DOWN      &kp KP_DOT    &kp RBKT      &mo KIN_FN
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };
    kinesis_fn {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             &kp F1        &kp F2        &kp F3        &kp F4        &kp F5        &kp F6        &tog KIN_KP                                                                                                 &mo MOD       &kp F7        &kp F8        &kp F9        &kp F10       &kp F11       &kp F12
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           _x_                                                                                                         _x_           ___           ___           ___           ___           ___           ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___           _x_                            ___           ___               ___           ___                            _x_           ___           ___           ___           ___           ___           ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___           ___                                                        ___               ___                                                        ___           ___           ___           ___           ___           ___
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             ___           ___           ___           ___           ___                                          ___           ___           ___               ___           ___           ___                                          ___           ___           ___           ___           ___
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };
    mod {
      bindings = <
        // ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮                                                                                             ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
             _x_           &bt BT_SEL 0  &bt BT_SEL 1  &bt BT_SEL 2  &bt BT_SEL 3  &bt BT_SEL 4  _x_                                                                                                         ___           _x_           _x_           _x_           _x_           _x_           _x_
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                                                                                             ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             _x_           &to QWERTY    _x_           _x_           _x_           _x_           &bootloader                                                                                                 &bootloader   _x_           _x_           _x_           _x_           _x_           _x_
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤                ╭─────────────┬─────────────╮   ╭─────────────┬─────────────╮                ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             _x_           &to APTV3     _x_           _x_           _x_           _x_           _x_                            _x_           _x_               &bt BT_CLR    _x_                  &rgb_ug RGB_MEFS_CMD 5  _x_           _x_           &to KIN_DEF   _x_           _x_           _x_
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯  ╭─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────╮  ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             _x_           _x_           _x_           _x_           &macro_ver    _x_                                                        _x_               _x_                                                        _x_           _x_           _x_           _x_           _x_           _x_
        // ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────╯                │             │             ├─────────────┤   ├─────────────┤             │             │                ╰─────────────┼─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
             _x_           _x_           _x_           _x_           _x_                                          _x_           _x_           _x_               _x_           &bl BL_TOG    &rgb_ug RGB_TOG                              &bl BL_INC    &bl BL_DEC    _x_           _x_           _x_
        // ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────╯   ╰─────────────┴─────────────┴─────────────╯                              ╰─────────────┴─────────────┴─────────────┴─────────────┴─────────────╯
      >;
    };
  };
};
